<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ø·Ø±ÙŠÙ‚ Ø§Ù„ØªØ­Ø±ÙŠØ± ğŸ‡µğŸ‡¸</title>
<style>
    :root { --green: #009739; --red: #ee2a35; }
    body { margin: 0; font-family: 'Cairo', sans-serif; background: #050505; color: white; text-align: center; overflow: hidden; touch-action: manipulation; }
    
    #gameArea {
        position: relative; width: 95%; max-width: 900px; height: 350px;
        margin: 15px auto; background: #1a1a1a;
        border: 5px solid var(--green); border-radius: 20px; overflow: hidden;
        transition: 0.5s; /* Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ø³Ù„Ø§Ø³Ø© */
    }

    /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ */
    .lvl1 { background: linear-gradient(to bottom, #4facfe, #00f2fe); }
    /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ø£ØµØ¹Ø¨) */
    .lvl2 { background: linear-gradient(to bottom, #2c3e50, #000000) !important; border-color: var(--red) !important; }

    .stats { font-size: 22px; font-weight: bold; margin: 10px; color: gold; }
    canvas { display: block; width: 100%; height: 100%; }
    
    .btn { padding: 12px 30px; font-size: 18px; border: none; border-radius: 10px; cursor: pointer; margin: 5px; font-weight: bold; }
    .btn-play { background: var(--red); color: white; }
</style>
</head>
<body class="lvl1">

<div class="stats">âœŒï¸ Ø§Ù„Ù…Ø³Ø§ÙØ©: <span id="score">0</span> / 100 Ù… | Ø§Ù„Ù…Ø±Ø­Ù„Ø©: <span id="lvlName">Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</span></div>

<div id="gameArea" class="lvl1">
    <canvas id="game"></canvas>
</div>

<div class="controls">
    <button class="btn btn-play" onclick="restart()">Ø¥Ø¹Ø§Ø¯Ø© Ù…Ù† Ø§Ù„ØµÙØ± ğŸ”„</button>
    <button class="btn" style="background:#333;color:white" onclick="check4K()">Ø¬ÙˆØ¯Ø© 4K ğŸ–¥ï¸</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playTone(f, d) {
    if (audioCtx.state === 'suspended') audioCtx.resume();
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.frequency.value = f; g.gain.value = 0.05;
    o.connect(g); g.connect(audioCtx.destination);
    o.start(); o.stop(audioCtx.currentTime + d);
}

function setSize() { canvas.width = canvas.offsetWidth; canvas.height = canvas.offsetHeight; }
setSize();

let player = { x: 50, y: 180, w: 60, h: 60, dy: 0, gravity: 0.8, jump: -16 };
let obstacles = [];
let score = 0;
let speed = 6;
let isDead = false;
let isPaused = false;
let frame = 0;
let level = 1;

function check4K() {
    alert("âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Windows:\nØ¯Ù‚Ø© 4K ØªØ³ØªÙ‡Ù„Ùƒ RAM Ùˆ CPU Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹.\nÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¬Ù‡Ø§Ø²Ùƒ Robust Ù„Ù„ØªØ´ØºÙŠÙ„ Ø¨Ø¯ÙˆÙ† ØªØ¹Ù„ÙŠÙ‚.");
}

function update() {
    if (isDead || isPaused) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©
    player.dy += player.gravity;
    player.y += player.dy;
    const floor = canvas.height - 80;
    if (player.y > floor) { player.y = floor; player.dy = 0; }

    // Ø±Ø³Ù… Ø§Ù„ÙØ¯Ø§Ø¦ÙŠ
    ctx.font = "55px serif";
    ctx.fillText("ğŸ¥·", player.x, player.y + 45);

    // ÙØ­Øµ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù€ 30 Ù…ØªØ± (Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙˆÙ‚Ù)
    if (score === 30 && level === 1) {
        isPaused = true;
        if (confirm("Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ù‚Ø·Ø¹Øª 30 Ù…ØªØ± Ø¨Ù†Ø¬Ø§Ø­!\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ ÙÙŠ Ø·Ø±ÙŠÙ‚ Ø§Ù„ØªØ­Ø±ÙŠØ±ØŸ (Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ø£ØµØ¹Ø¨)")) {
            level = 2;
            speed = 9; // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ø±Ø¹Ø© ÙÙˆØ±Ø§Ù‹
            document.getElementById("gameArea").classList.add("lvl2");
            document.getElementById("lvlName").innerText = "Ø§Ù‚ØªØ­Ø§Ù… Ø§Ù„ØµØ¹Ø§Ø¨";
            isPaused = false;
            update(); // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
        } else {
            restart();
        }
        return;
    }

    // ÙØ­Øµ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù€ 100 Ù…ØªØ± (Ø§Ù„Ù†Ù‡Ø§ÙŠØ©)
    if (score >= 100) {
        isDead = true;
        playTone(800, 0.5);
        alert("âœŒï¸ Ø§Ù„Ù„Ù‡ ÙŠÙ†ØµØ± ÙÙ„Ø³Ø·ÙŠÙ† ÙˆØ£Ù‡Ù„Ù‡Ø§ ğŸ‡µğŸ‡¸\nØ§Ù„Ù„Ù‡Ù… ÙƒÙ† Ø¹ÙˆÙ†Ø§Ù‹ Ù„Ø£Ù‡Ù„Ù†Ø§ ÙÙŠ ØºØ²Ø© ÙˆØ§Ù†ØµØ±Ù‡Ù… Ù†ØµØ±Ø§Ù‹ Ø¹Ø²ÙŠØ²Ø§Ù‹.\n\nØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!");
        return;
    }

    // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø©
    let spawnRate = level === 1 ? 100 : 60; // Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø¹ÙˆØ§Ø¦Ù‚ Ø£ÙƒØ«Ø±
    if (frame % spawnRate === 0) {
        let char = level === 1 ? "ğŸ§±" : "ğŸ”¥"; // ØªØºÙŠÙŠØ± Ø´ÙƒÙ„ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚
        obstacles.push({ x: canvas.width, y: floor + 10, char: char });
    }

    for (let i = obstacles.length - 1; i >= 0; i--) {
        obstacles[i].x -= speed;
        ctx.font = level === 1 ? "40px serif" : "50px serif";
        ctx.fillText(obstacles[i].char, obstacles[i].x, obstacles[i].y + 30);

        // ØªØµØ§Ø¯Ù…
        if (Math.abs(player.x - obstacles[i].x) < 40 && player.y > floor - 30) {
            isDead = true;
            playTone(150, 0.4);
            alert("ØªØ¹Ø«Ø±Øª ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù‡Ø¯Ù âœŒï¸");
        }

        // Ù†Ù‚Ø§Ø·
        if (obstacles[i].x < -50) {
            obstacles.splice(i, 1);
            score++;
            speed += 0.15; 
            document.getElementById("score").innerText = score;
            playTone(700, 0.05);
        }
    }

    frame++;
    requestAnimationFrame(update);
}

function jump() {
    const floor = canvas.height - 80;
    if (player.y >= floor - 5 && !isDead && !isPaused) {
        player.dy = player.jump;
        playTone(450, 0.1);
    }
}

// Ø§Ù„ØªØ­ÙƒÙ…
window.onkeydown = e => { if(e.code === "Space") jump(); };
canvas.addEventListener("touchstart", e => { e.preventDefault(); jump(); }, {passive: false});
window.onmousedown = e => { if(e.target.tagName !== 'BUTTON') jump(); };

function restart() {
    isDead = false; isPaused = false; score = 0; speed = 6; obstacles = []; level = 1;
    player.y = 100;
    document.getElementById("score").innerText = "0";
    document.getElementById("lvlName").innerText = "Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©";
    document.getElementById("gameArea").classList.remove("lvl2");
    update();
}

// Ø§Ù„Ø¨Ø¯Ø¡
update();
</script>
</body>
</html>

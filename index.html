<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„Ø¹Ø¨Ø© Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø£Ø°ÙƒÙŠØ§Ø¡</title>

<style>
body{
margin:0;
background:#111;
color:white;
font-family:Cairo,sans-serif;
text-align:center;
overflow:hidden;
}

h2{color:gold;margin:10px}

#gameContainer{
width:95%;
max-width:1000px;
height:60vh;
max-height:450px;
margin:auto;
border-radius:20px;
border:4px solid #00ff88;
background:linear-gradient(to top,#1a1a1a,#222);
position:relative;
overflow:hidden;
}

canvas{
width:100%;
height:100%;
display:block;
}

.stats{
margin:10px;
font-size:18px;
color:#00ffaa;
}

button{
padding:8px 20px;
border:none;
border-radius:10px;
background:#ff0040;
color:white;
font-size:16px;
margin:5px;
cursor:pointer;
}
</style>
</head>
<body>

<h2>ðŸ§  Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø£Ø°ÙƒÙŠØ§Ø¡</h2>

<div class="stats">
Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span> |
Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="level">1</span>
</div>

<div id="gameContainer">
<canvas id="game"></canvas>
</div>

<button onclick="restart()">Ø¥Ø¹Ø§Ø¯Ø© ðŸ”„</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
canvas.width = canvas.offsetWidth;
canvas.height = canvas.offsetHeight;
}
window.addEventListener("resize",resize);
resize();

let groundHeight = 80;

let player = {
x:80,
y:0,
width:40,
height:40,
dy:0,
gravity:0.7,
jumpPower:-14,
duck:false
};

let obstacles=[];
let score=0;
let level=1;
let speed=5;
let frame=0;
let gameOver=false;

function resetPlayer(){
player.y = canvas.height-groundHeight-player.height;
player.dy=0;
}
resetPlayer();

function spawnObstacle(){
let type = Math.random() > 0.5 ? "ground" : "air";
let size = 40;

obstacles.push({
x:canvas.width,
y:type==="ground" 
? canvas.height-groundHeight-size
: canvas.height-groundHeight-size-80,
width:size,
height:size,
type:type
});
}

function update(){

if(gameOver) return;

ctx.clearRect(0,0,canvas.width,canvas.height);

// Ø±Ø³Ù… Ø§Ù„Ø£Ø±Ø¶
ctx.fillStyle="#333";
ctx.fillRect(0,canvas.height-groundHeight,canvas.width,groundHeight);

// ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨
player.dy += player.gravity;
player.y += player.dy;

if(player.y > canvas.height-groundHeight-player.height){
player.y = canvas.height-groundHeight-player.height;
player.dy=0;
}

// Ø±Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨
ctx.font="40px serif";
ctx.fillText("ðŸ¥·",player.x,player.y+35);

// ØªÙˆÙ„ÙŠØ¯ Ø¹ÙˆØ§Ø¦Ù‚
if(frame % Math.max(80 - level*5,40) === 0){
spawnObstacle();
}

// Ø­Ø±ÙƒØ© Ø¹ÙˆØ§Ø¦Ù‚
for(let i=obstacles.length-1;i>=0;i--){
let o=obstacles[i];
o.x -= speed;

ctx.font="35px serif";
ctx.fillText(o.type==="ground"?"ðŸ”¥":"ðŸ¦…",o.x,o.y+30);

// ØªØµØ§Ø¯Ù… Ù…Ø¶Ø¨ÙˆØ·
if(
player.x < o.x + o.width &&
player.x + player.width > o.x &&
player.y < o.y + o.height &&
player.y + player.height > o.y
){
gameOver=true;
setTimeout(showResult,200);
}

if(o.x + o.width < 0){
obstacles.splice(i,1);
score++;
speed += 0.1;

if(score % 15 === 0){
level++;
speed += 0.5;
}

document.getElementById("score").innerText=score;
document.getElementById("level").innerText=level;
}
}

frame++;
requestAnimationFrame(update);
}

function jump(){
if(player.dy===0 && !gameOver){
player.dy = player.jumpPower;
}
}

// ØªØ­ÙƒÙ… ÙƒÙ…Ø¨ÙŠÙˆØªØ±
window.addEventListener("keydown",e=>{
if(e.code==="Space") jump();
});

// ØªØ­ÙƒÙ… Ù…ÙˆØ¨Ø§ÙŠÙ„
canvas.addEventListener("touchstart",()=>{
jump();
});

function showResult(){
if(score < 15){
alert("ðŸ¤” ØªØ±ÙƒÙŠØ² Ø£ÙƒØ«Ø±... Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¯Ù‡Ø§ Ø°ÙƒØ§Ø¡!");
}
else if(score < 40){
alert("ðŸ”¥ Ù…Ù…ØªØ§Ø²... Ø¨Ø³ Ù„Ø³Ø§ Ù‚Ø¯Ø§Ù…Ùƒ ØªØ­Ø¯ÙŠ Ø£ÙƒØ¨Ø±!");
}
else{
alert("ðŸ§  Ø¥Ø°Ø§ Ù…Ø´ Ø°ÙƒÙŠ... Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø´ Ø¥Ù„Ùƒ ðŸ˜Ž");
}
}

function restart(){
score=0;
level=1;
speed=5;
frame=0;
obstacles=[];
gameOver=false;
document.getElementById("score").innerText=0;
document.getElementById("level").innerText=1;
resetPlayer();
update();
}

update();
</script>

</body>
</html>